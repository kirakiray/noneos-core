<template page>
  <!-- <l-m src="../comps/monaco-editor.html"></l-m> -->
  <style>
    :host {
      display: flex;
      width: 100%;
      height: 100%;
    }

    .left {
      width: 260px;
      border-right: 1px solid rgba(204, 204, 204, 0.2);
    }
    .main {
      display: flex;
      flex-direction: column;
      position: relative;
      flex: 1;
    }
    .main-top {
      height: 36px;
      border-bottom: 1px solid rgba(204, 204, 204, 0.2);
    }
    .article {
      flex: 1;
    }
  </style>
  <div class="left">
    <o-page src="./file-explore.html"></o-page>
  </div>
  <div class="main">
    <div class="main-top"></div>
    <div class="article">
      <monaco-editor
        style="width: 100%; height: 100%"
        plugins="prettier"
      ></monaco-editor>

      <!-- <monaco-editor
    style="width: 100%; height: 100%"
    plugins="http://localhost:3002/_packages/editor/comps/plugins/prettier.js"
  ></monaco-editor> -->
    </div>
  </div>
  <o-consumer name="project-data" watch:path="projectPath"></o-consumer>
  <script>
    export const parent = "./layout.html";

    export default async ({ load }) => {
      await load("../comps/monaco-editor.html");

      const { get } = await load("/nos/fs/handle/main.js");

      return {
        data: {
          projectPath: "",
        },
        proto: {},
        async attached() {
          await this.shadow.$("monaco-editor")._initialized;

          //           this.shadow.$("monaco-editor").setValue(`<!DOCTYPE html>
          // <html lang="zh-CN">
          // <head>
          // <meta charset="UTF-8">
          // <title>未格式化代码</title>
          // <style>
          // body{background:#f0f0f0;color:#333;}
          // .container{max-width:1200px;margin:0 auto;padding:20px;}
          // </style>
          // </head>
          // <body>
          // <div class="container">
          // <h1>测试自动格式化</h1>
          // <p>粘贴或输入混乱代码，会自动整理格式。</p>
          // <ul><li>项目1</li><li>项目2</li><li>项目3</li></ul>
          // </div>
          // </body>
          // </html>`);
        },
      };
    };
  </script>
</template>
