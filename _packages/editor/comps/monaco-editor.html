<template component>
  <style>
    :host {
      display: block;
    }
    .container {
      width: 100%;
      height: 100%;
    }
  </style>
  <!-- <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/monaco-editor@0.47.0/dev/vs/editor/editor.main.css"
  /> -->
  <link
    rel="stylesheet"
    href="/npm/monaco-editor@0.47.0/dev/vs/editor/editor.main.css"
  />
  <div class="container" id="container"></div>
  <script>
    // import * as monaco from "/npm/monaco-editor@0.44.0/+esm";
    // import * as monaco from "https://cdn.jsdelivr.net/npm/monaco-editor@0.44.0/+esm";

    export default async ({ load }) => {
      const monaco = await load("/npm/monaco-editor@0.44.0/+esm");

      return {
        tag: "monaco-editor",
        data: {},
        attached() {
          // 创建编辑器
          const editor = monaco.editor.create(this.shadow.$("#container").ele, {
            language: "html",
            theme: "vs-dark",
            tabSize: 2,
            insertSpaces: true,
            fontSize: 14,
            automaticLayout: true,
            wordWrap: "on",
          });

          // 设置 editor 的value
          editor.setValue(`<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>未格式化代码</title>
<style>
body{background:#f0f0f0;color:#333;}
.container{max-width:1200px;margin:0 auto;padding:20px;}
</style>
</head>
<body>
<div class="container">
<h1>测试自动格式化</h1>
<p>粘贴或输入混乱代码，会自动整理格式。</p>
<ul><li>项目1</li><li>项目2</li><li>项目3</li></ul>
</div>
</body>
</html>`);
        },
      };
    };
  </script>
</template>
