<template page>
  <l-m src="/gh/ofajs/Punch-UI/packages/button/button.html"></l-m>
  <l-m src="/nos/n-icon/n-icon.html"></l-m>

  <style>
    :host {
      display: block;
    }

    h3 {
      font-size: 18px;
    }

    .container {
      width: 100%;
      height: 100%;
      padding: 16px;
      box-sizing: border-box;
    }

    .preview-frame {
      width: 360px;
      height: 400px;
      border-radius: 4px;
      border: 1px solid var(--md-sys-color-primary);
    }
  </style>
  <div class="container">
    <h3>预览</h3>
    <iframe
      class="preview-frame"
      attr:src="previewUrl"
      frameborder="0"
    ></iframe>
    <div style="padding-top: 16px">
      <p-button variant="outlined">
        <n-icon icon="material-symbols:preview" slot="prefix"></n-icon>
        <a attr:href="previewUrl" target="_blank">新窗口预览应用</a>
      </p-button>
    </div>
    <h3>附加功能</h3>
  </div>
  <script>
    export const parent = "./layout.html";

    export default async ({ load, query }) => {
      return {
        data: {
          previewUrl: "/" + query.path + "/",
          query: decodeURIComponent(query.path),
        },
        proto: {},
        attached() {
          this.emit("active-page", {
            composed: true,
            data: { name: "dashboard" },
          });
        },
      };
    };
  </script>
</template>
